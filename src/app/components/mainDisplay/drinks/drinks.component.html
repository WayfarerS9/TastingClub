<app-main-header></app-main-header>
<div class="main">
  <button class="goBackButton" mat-fab (click)="goBack()">
    <mat-icon>arrow_back</mat-icon>
  </button>

  <div class="container-header">
    <h2>My Drinks</h2>
  </div>

  <div class="container">
    <div class="container-left-side">
      <h3 *ngIf="!isAdd">Drinks I've tasted</h3>
      <h3 *ngIf="isAdd">Type the name of the drink</h3>

      <div *ngIf="!isAdd" class="list">
        <!-- Поменял в *ngFor myTastedDrinks на matchingDrinks, который отображает алкоголь, который пользователь выбрал-->
        <p *ngFor="let drink of myTastedDrinks; let i = index" (click)="selectAndGetDrink(drink)"
          [ngClass]="{ selectedItem: drink === selectedTastedDrink }" class="item">
          {{ i + 1 }}. {{ drink.title }}
        </p>
      </div>

      <div class="findDrink" *ngIf="isAdd">
        <mat-form-field appearance="fill">
          <mat-label>Type the drink</mat-label>
          <input matInput placeholder="Search" (input)="searchDrinks($event)" />
        </mat-form-field>

        <div class="listOfFind">
          <p *ngFor="let drink of matchingDrinks; let i = index" class="item" (click)="selectAndGetDrink(drink)"
            [ngClass]="{ selectedItem: drink === selectedTastedDrink }">
            {{ i + 1 }}. {{ drink.title }}
          </p>
        </div>
      </div>

      <div class="four-buttons">
        <button class="button-add" mat-fab color="primary" (click)="onAdd()" *ngIf="!isAdd && !isEdit">
          <mat-icon>search</mat-icon>
        </button>
        <!-- <button
          class="button-add"
          mat-raised-button
          color="primary"
          *ngIf="isAdd"
        >
          Add Feedback
        </button> -->
        <button class="button-edit" mat-fab color="accent" (click)="onEdit()" *ngIf="!isAdd && !isEdit">
          <mat-icon>edit</mat-icon>
        </button>
        <button class="button-edit-check" mat-fab (click)="update()" *ngIf="isEdit" >
          <mat-icon>check</mat-icon>
        </button>
        <button class="button-back" mat-fab *ngIf="isAdd || isEdit" (click)="backToMyDrinks()">
          Back
        </button>
      </div>
    </div>

    <div class="container-right-side">
      <div class="feedBack" *ngIf="!isAdd">
        <div class="infAboutDrink">
          <h3>
            {{ myTastedDrinkFullInfo?.typeOfDrink }}
            {{ myTastedDrinkFullInfo?.name }}
          </h3>
          <p><strong>Region:</strong> {{ myTastedDrinkFullInfo?.region }}</p>
          <p>
            <strong>Manufacturer:</strong>
            {{ myTastedDrinkFullInfo?.manufacturer }}
          </p>

          <p *ngIf="myTastedDrinkFullInfo?.category">
            <strong>Category:</strong>
            <span *ngFor="let category of myTastedDrinkFullInfo?.category">
              {{ category }},
            </span>
          </p>
          <p *ngIf="myTastedDrinkFullInfo?.type">
            <strong>Type:</strong> {{ myTastedDrinkFullInfo?.type }}
          </p>
          <p *ngIf="myTastedDrinkFullInfo?.grape">
            <strong>Grape:</strong> {{ myTastedDrinkFullInfo?.grape }}
          </p>
          <p *ngIf="myTastedDrinkFullInfo?.filtration">
            <strong>Filtration:</strong> {{ myTastedDrinkFullInfo?.filtration }}
          </p>
          <p>
            <strong>Alcohol:</strong> {{ myTastedDrinkFullInfo?.strength }}%
          </p>
          <p>
            <strong>Volume:</strong> {{ myTastedDrinkFullInfo?.volume }} liter
          </p>
          <p>
            <strong>Date of degustation: </strong>{{ myTastedDrinkFullInfo?.dateOfDegustation }};
          </p>
          <p>
            <strong>My grade: </strong>{{ myTastedDrinkFullInfo?.rating }};
          </p>
          <p>
            <strong>My feedback: </strong> {{ myTastedDrinkFullInfo?.feedBack }}
          </p>
        </div>

        <div *ngIf="isEdit">
          <mat-form-field class="datepicker" appearance="fill">
            <mat-label>Choose a date of degustation</mat-label>
            <input matInput [matDatepicker]="picker">
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>
          <button mat-raised-button color="accent" (click)="picker.open()">Open</button>

          <form #feedBackForm="ngForm">
            <!-- <mat-slider max="10" min="0" step="1" thumbLabel="true" [(ngModel)]="addUpdateFeedBackModel.points">
            </mat-slider>
            <br /> -->
            <ngb-rating [(rate)]="starRating"></ngb-rating>
            <pre>Rate: <b>{{starRating}}</b></pre>

            <mat-form-field appearance="fill">
              <mat-label>Leave a comment</mat-label>
              <textarea matInput placeholder="It's a wonderfull drink..." [(ngModel)]="addUpdateFeedBackModel.feedBack"
                rows="2"></textarea>
              <!-- <mat-icon>comment</mat-icon> -->
            </mat-form-field>
          </form>
        </div>
      </div>

      <div class="feedBack" *ngIf="isAdd"></div>
    </div>
  </div>
</div>